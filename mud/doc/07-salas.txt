Salas (classe sala, em obj/sala.int)

Para criar uma sala em um item:
criar("nome da classe", item)

const s_sala = 1
Indica que é uma sala (personagens conseguem entrar).

const s_titulo = "texto"
arg0 = personagem que está requisitando o título
Retorna o título da sala.

const s_desc = "texto"
arg0 = personagem que está requisitando o título
Retorna a descrição da sala.

const s_noite = "texto"
arg0 = personagem que está requisitando o título
Retorna a descrição da sala quando está de noite.
Inicialmente, para ser a mesma descrição que de dia, é definido como:
const s_noite = s_desc(arg0)

const s_ocultar = 0
arg0 = personagem que está consultando essa constante
Verdadeiro (geralmente 1) deve ocultar a descrição da sala ao entrar.

const s_terreno = 0
Tipo de terreno:
0 = Dentro, lugar fechado - 1mv
1 = Rua de uma cidade - 2mv
2 = Campo, um campo aberto - 2mv
3 = Pântano, itens afundam - 3mv
4 = Floresta densa - 3mv
5 = Colina - 4mv
6 = Montanha, excessivamente montanhoso - 6mv
7 = Água, pode nadar - 4mv
8 = Água, requer barco para passar - 50mv
9 = Em baixo d'água - 10mv
10 = Ar, itens e personagens caem - 10mv
11 = Deserto, 3x mais sede, 6mv

const s_atk_move = 0
Quantidade de movimentos que um ataque de outra sala usa para checar nessa.

const s_luz = 0
Tipo de iluminação:
0 = Claro com eventos de tempo
1 = Claro sem eventos de tempo
2 = Luz do sol
3 = Escuro

const s_recup = 100
arg0 = personagem que está consultando essa constante
Taxa de recuperação de vida, mana e movimentos dos personagens.
Quanto maior, mais recupera; 0 não recupera.

const s_item = 5
Em quantos minutos sem jogador na sala deve começar a apagar os itens.
Os itens são apagados aos poucos, pela função t_item_exec, com a variável:
inttempo t_item # Tempo para começar a apagar itens da sala

const s_morre = 0
arg0 = personagem que está consultando essa constante
Se o personagem morre ao entrar na sala:
0 = Não morre
1 = Morre
2 = Morre e perde itens e moedas
3 = Morre e perde itens
4 = Morre e perde moedas

const s_falar = ""
arg0 = personagem que está consultando essa constante
Mensagem recebida ao usar o comando falar.
Se nulo ou um texto vazio, permite falar.

const s_gritar = s_falar
arg0 = personagem que está consultando essa constante
Mensagem recebida ao usar o comando gritar.
Se nulo ou um texto vazio, permite gritar.

const s_luta = 1
Tipo de luta permitido:
0 = Nenhuma
1 = Exceto entre jogador
2 = Qualquer luta

const s_semmagia = 0
Se não é possível usar magia na sala (0=permite, 1=não permite).

const s_retornar = 0
arg0 = personagem que está consultando essa constante
Comando retornar e magia retornar:
0 = Permite
1 = Não permite
2 = Muda o ponto de retorno para essa sala
3 = Muda o ponto de retorno se ainda não possuir

const s_voltar = nulo
arg0 = personagem que está consultando essa constante
Quando um jogador sair do jogo e voltar, para qual sala deve voltar.
Exemplo de constante: const s_voltar = $s_casa001

const s_pnj = 10
Quantidade máxima de personagens não jogador na sala.

const s_jog = 100
Quantidade máxima de personagens de jogadores na sala.

const s_soltar = 0
arg0 = personagem que está consultando essa constante
Se é permitido soltar itens:
0 = Permitido
1 = Não permitido
2 = Se soltar, destrói afundando
3 = Se soltar, destrói caindo
4 = Se soltar, desintegra

const s_doarsalas = ""
Para que salas os itens doados vão. Texto contendo a lista de salas,
uma sala por linha (nomes das classes sem o s_ no começo).

const s_doarsim = 0
Itens doados que essa sala aceita; se vazio aceita qualquer item.
É um valor numérico em que cada bit corresponde a um tipo de item
da lista em config:produtos, no arquivo config/config.int.

const s_doarnao = 0
Itens doados que essa sala não aceita.
É um valor numérico em que cada bit corresponde a um tipo de item
da lista em config:produtos, no arquivo config/config.int.

const s_entrada = ""
Nome da porta correspondente a essa sala, quando ela pertence a um item.
Se definido, pode-se entrar no item por essa sala, e sair sai do item.
Quando um item possui várias portas, o jogador deve escolher em qual entrar.

const dir_[direção] = nulo
ref dir_[direção]
arg0 = personagem que está consultando essa constante (pode ser nulo)
Sala na direção especificada.
Se for item, será a sala aonde o item está.
Se a sala estiver dentro de um item, procura a sala especificada no mesmo item.
Se estiver ausente ou for nulo, não há sala nessa direção
Geralmente é definido dessa forma: const dir_s = $sala1
As direções válidas são: n s l o ne no se so c b entrar sair

uint8 porta_[direção]
const portaini_[direção]
Especifica o tipo de saída em determinada direção.
Porta é o valor atual, geralmente definido dessa forma: uint8 porta_s
PortaIni é o valor inicial, geralmente definido dessa forma: const porta_s = 2
0 = Não há porta
1 = Está aberto
2 = Está fechado
3 = Está trancado

const inv_[direção]
arg0 = personagem que está consultando essa constante
Verdadeiro se for invisível (não aparece na lista de saídas)

const tranc_[direção]
arg0 = personagem que está consultando essa constante
0 = Não pode ser trancado
1 = Pode ser trancado
2 = Tranca ao fechar

const fechadura_[direção]
arg0 = personagem que está consultando essa constante
Texto que contém o código da fechadura.
Somente uma chave com o mesmo código tranca e destranca.
Se estiver ausente ou for um texto vazio, não requer chave.

const voar_[direção]
arg0 = personagem que está consultando essa constante
Se é preciso estar voando ou flutuando para seguir nessa direção.
0=não, 1=sim

const fugir_[direção]
arg0 = personagem que está consultando essa constante
Se não existe a possibilidade de fugir de uma luta nessa direção.
0=permite fugir, 1=não permite fugir

const portanome_[direção]
Nome da porta na direção especificada. Se estiver ausente ou for um
texto vazio, será usada a mensagem padrão, que depende da porta.
Essas constantes são usadas nos comandos abrir/fechar/trancar/destrancar.
Exemplo:
const portanome_n = "a porta da casa"

const portaartigo_[direção]
Se o nome da porta está no singular ou plural, feminino ou masculino.
0 a (porta)
1 as (portas)
2 o (portão)
3 os (portões)

const s_doarsalas = ""
Para que salas os itens doados vão. Texto contendo a lista de salas,
uma sala por linha (nomes das classes sem o s_ no começo).

const s_doarsim = 0
Itens doados que essa sala aceita; se vazio aceita qualquer item.
É um valor numérico em que cada bit corresponde a um tipo de item
da lista em config:produtos, no arquivo config/config.int.

const s_doarnao = 0
Itens doados que essa sala não aceita.
É um valor numérico em que cada bit corresponde a um tipo de item
da lista em config:produtos, no arquivo config/config.int.

const s_reset
Reset de sala:
Um texto que contém os executados quando algum jogador entra na sala.
O significado do texto está explicado no início do arquivo adm/reset.int.

const a_reset
Reset de área:
Um texto que contém os executados quando ocorre reset da área.
O significado do texto está explicado no início do arquivo adm/reset.int.

const ver_[nome da descrição] = "descrição"
func ver_[nome do a descrição]
arg0 = personagem que está consultando essa constante
Deve retornar um texto que é a descrição extra ou "" se não houver.
Para criar descrições diurnas ou noturnas, acrescentar @d ou @n,
respectivamente, no fim do nome da descrição.
Exemplo de como criar uma descrição:
const ver_placa = "Você olha para uma placa vazia."
Exemplo de descrição diurna:
const ver_placa@d = "À luz do sol você nota que é uma placa verde."
Exemplo de descrição noturna:
const ver_placa@n = "Está escuro demais para ler o que está escrito na placa."

func descsala( jogador, modo )
Adiciona texto com a descrição da sala
Se modo=0, mostra o mais curto possível
Somar 1 para mostrar descrição completa
Somar 2 para mostrar saídas
Somar 4 para mostrar os personagens e itens
Somar 8 para mostrar o nome da sala

func txtsai( jogador )
Retorna as saídas existentes (texto)

func dirsala( direção, personagem )
Retorna a sala em uma direção ou nulo se não existir.
Nota: personagem pode ser nulo se for genérico.

func diritem( direção, personagem )
Retorna o item em uma direção ou nulo se não for item.
Nota: personagem pode ser nulo se for genérico.

func mudaporta( saída, valor, mens1, mens2 )
Muda estado de uma saída; variável porta_[arg0]
Saída é nome da saída (até duas letras)
Novo valor, vide porta_[direção]
Mens1 = mensagem enviada para a própria sala, da mesma forma que $mens.mtodos1
Mens2 = mensagem enviada para a sala vizinha, da mesma forma que $mens.mtodos1
Nas mensagens, "$m" é o nome da porta
Retorna: 0=saída inexistente, 1=saída foi alterada

func msg( mensagem )
Envia mensagem para todos os personagens que estiverem na sala.

func msgtodos( mensagem )
Envia mensagem para todos os personagens que estiverem acordados na sala.
